/*! 2015 Baidu Inc. All Rights Reserved */
define("scards/c_similar/pages/js/slider",["require","zepto","common/widget/Waterfall"],function(require){function e(){this.screenWidth=0,this.sliderSection=null,this.sliderUl=null,this.sliderLis=null,this.page=1,this.imgsInfo=null,this.sugguestionImgLis=null,this.waterfallDone=null,this.ajax=null}var t=require("zepto"),n=require("common/widget/Waterfall");return e.prototype.init=function(e){this.sliderSection=t(".slider-section"),this.sliderUl=t(".slider-section .slider-list"),this.sliderLis=t(".slider-section .slider-img"),this.sugguestionImgLis=t("#sugguestion-waterfall li"),this.waterfallDone=t(".waterfall-done"),this.introductionTitle=t(".slider-introduction .introduction-title"),this.introductionTitle.html(e.imgsInfo[0].title),this.introductionContent=t(".slider-introduction .introduction-content"),this.introductionContent.html(e.imgsInfo[0].introduction),this.introductionLink=t(".slider-introduction .introduction-link"),this.introductionLink.html(e.imgsInfo[0].fromUrl),this.introductionLink.attr("href",e.imgsInfo[0].fromUrl),this.screenWidth=t(window).width(),this.sliderLis.css("width",this.screenWidth),this.imgsInfo=e.imgsInfo,this.sliderSection.css("height",Math.ceil(this.screenWidth*e.imgsInfo[0].thumbHeight/e.imgsInfo[0].thumbWidth)),this.sliderUl.css("width",e.imgsInfo.length*this.screenWidth);for(var i=0;i<e.imgsInfo.length;i++){var r=t("<li></li>");r.addClass("slider-img"),r.css("width",this.screenWidth);var o=t("<img />");o.attr("src",e.imgsInfo[i].objUrl),o.css("width",this.screenWidth),r.append(o),this.sliderUl.append(r),r=null}var s=new n;s.init({idName:"sugguestion-waterfall",ajaxUrl:data.imgsInfo[0].ajaxUrl,containerId:"viewport"}),this.ajax=s.getImages(),this.slide()},e.prototype.slide=function(){var e=this;this.sliderUl.on("touchmove",function(e){e.preventDefault()}),this.sliderUl.swipeLeft(function(){if(e.page<e.imgsInfo.length){e.introductionTitle.html(e.imgsInfo[e.page].title),e.introductionContent.html(e.imgsInfo[e.page].introduction),e.introductionLink.html(e.imgsInfo[e.page].fromUrl),e.sliderSection.css("height",Math.ceil(e.screenWidth*e.imgsInfo[e.page].thumbHeight/e.imgsInfo[e.page].thumbWidth)),e.sugguestionImgLis.html(""),e.waterfallDone.css("display","none"),e.ajax.abort();var i=new n;i.init({idName:"sugguestion-waterfall",ajaxUrl:e.imgsInfo[e.page].ajaxUrl}),e.ajax=i.getImages(),t(this).css("left",-e.screenWidth*e.page),e.page++}}),this.sliderUl.swipeRight(function(){if(e.page>1){e.page--,e.introductionTitle.html(e.imgsInfo[e.page-1].title),e.introductionContent.html(e.imgsInfo[e.page-1].introduction),e.introductionLink.html(e.imgsInfo[e.page-1].fromUrl),e.sliderSection.css("height",Math.ceil(e.screenWidth*e.imgsInfo[e.page-1].thumbHeight/e.imgsInfo[e.page-1].thumbWidth)),t(this).css("left",-e.screenWidth*(e.page-1)),e.sugguestionImgLis.html(""),e.waterfallDone.css("display","none"),e.ajax.abort();var i=new n;i.init({idName:"sugguestion-waterfall",ajaxUrl:e.imgsInfo[e.page-1].ajaxUrl}),thisSliide.ajax=i.getImages()}})},e});