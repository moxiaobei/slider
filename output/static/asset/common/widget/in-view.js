/*! 2015 Baidu Inc. All Rights Reserved */
define("common/widget/in-view",["require","common/lib/animationFrame","zepto"],function(require){var e="[data-in-view]",t=require("common/lib/animationFrame").requestAnimationFrame,n=require("zepto"),r=1e3,exports=function(){function i(n){if(n-l>r){l=n;var u=document.querySelectorAll(e);if(u.length>0){var c=o(u),f=s(c);a(f)}}t(i)}function o(e){for(var t=[],n=window.innerHeight,r=0,i=e.length;i>r;r++){var o=e[r];if(o.getBoundingClientRect){var s=o.getBoundingClientRect();if(s.top>=0&&s.top<n)t.push(o);else if(t.length>0)break}}return t}function s(e){for(var t=[],r=0,i=e.length;i>r;r++){var o=e[r],s=n(o).attr("data-in-view");if(o.removeAttribute("data-in-view"),s)t.push(s)}return t}function a(e){if(0!==e.length){var t=document.createElement("img"),n="/api/log/?";n+="a=inview",n+="&i="+encodeURIComponent(e.join("|")),t.src=n}}var l=0;t(function(e){l=e,i(e)})};return exports});