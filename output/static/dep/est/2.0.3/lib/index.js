/*! 2015 Baidu Inc. All Rights Reserved */
function clone(e){var t={};e=e||{};for(var r in e)t[r]=e[r];return t}function extend(e,t){e=e||{},t=t||{};var r=clone(e);for(var n in t)r[n]=t[n];return r}function Est(e){this.options=extend(DEFAULT_OPTIONS,e)}var DEFAULT_OPTIONS={autoImport:!0,uniqueDirectives:!0};Est.prototype={install:function(e,t){var r=e.version,n=this.options;if(n.autoImport&&(r[0]>2||r[1]>=4))require("./injector").install(e,t);if(n.uniqueDirectives)require("./unique-directives").install(e,t);if(r[1]<3)require("./custom-functions").install(e,t)},printUsage:function(){console.log(""),console.log("Usage:"),console.log("Specify plugin with `--est`."),console.log(""),console.log("Arguments:"),console.log("The argument is a query string with the available options below:"),console.log("* `autoImport`"),console.log("  Determines if est is automatically imported before everything else.\n  `true`' by default."),console.log("* `uniqueDirectives`"),console.log("  Determines if est eliminates duplicate named at-rules like @keyframes or @counter-style.\n  `true`' by default."),console.log(""),console.log("Examples:"),console.log('lessc style.less --est="autoImport=false&uniqueDirectives=false"'),console.log("")},setOptions:function(e){e=e||{};var t="";if("string"==typeof e)t=e,e=this.parseOptions(t);for(var r in e)if(!(r in DEFAULT_OPTIONS))throw new Error("No such option.");if(t.length&&!Object.keys(e).length)throw new Error("Invalid argument syntax.");this.options=extend(DEFAULT_OPTIONS,e)},parseOptions:function(e){var t=e.split("&"),r={};return t=t.filter(function(e){return e.match(/^[\w_-]+=?$|^[\w_-]+=[^=]+$/)}).forEach(function(e){var t=e.split("="),n=t[1];if(void 0===n||""===n)n=!0;else if("false"===n.toLowerCase())n=!1;r[t[0]]=n}),r},minVersion:[2,0,0]},module.exports=Est;