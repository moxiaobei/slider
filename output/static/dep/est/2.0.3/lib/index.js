/*! 2015 Baidu Inc. All Rights Reserved */
function clone(e){var t={};e=e||{};for(var n in e)t[n]=e[n];return t}function extend(e,t){e=e||{},t=t||{};var n=clone(e);for(var r in t)n[r]=t[r];return n}function Est(e){this.options=extend(DEFAULT_OPTIONS,e)}var DEFAULT_OPTIONS={autoImport:!0,uniqueDirectives:!0};Est.prototype={install:function(e,t){var n=e.version,r=this.options;if(r.autoImport&&(n[0]>2||n[1]>=4))require("./injector").install(e,t);if(r.uniqueDirectives)require("./unique-directives").install(e,t);if(n[1]<3)require("./custom-functions").install(e,t)},printUsage:function(){console.log(""),console.log("Usage:"),console.log("Specify plugin with `--est`."),console.log(""),console.log("Arguments:"),console.log("The argument is a query string with the available options below:"),console.log("* `autoImport`"),console.log("  Determines if est is automatically imported before everything else.\n  `true`' by default."),console.log("* `uniqueDirectives`"),console.log("  Determines if est eliminates duplicate named at-rules like @keyframes or @counter-style.\n  `true`' by default."),console.log(""),console.log("Examples:"),console.log('lessc style.less --est="autoImport=false&uniqueDirectives=false"'),console.log("")},setOptions:function(e){e=e||{};var t="";if("string"==typeof e)t=e,e=this.parseOptions(t);for(var n in e)if(!(n in DEFAULT_OPTIONS))throw new Error("No such option.");if(t.length&&!Object.keys(e).length)throw new Error("Invalid argument syntax.");this.options=extend(DEFAULT_OPTIONS,e)},parseOptions:function(e){var t=e.split("&"),n={};return t=t.filter(function(e){return e.match(/^[\w_-]+=?$|^[\w_-]+=[^=]+$/)}).forEach(function(e){var t=e.split("="),r=t[1];if(void 0===r||""===r)r=!0;else if("false"===r.toLowerCase())r=!1;n[t[0]]=r}),n},minVersion:[2,0,0]},module.exports=Est;